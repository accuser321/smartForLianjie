# V2 当前进度与接口缺口

## 已完成改动

1. 后端增加旧接口前缀兼容，避免前端大量 `/abt/...` 调用直接 404。
- `springboot-smart/src/main/java/com/nh/smart/controller/record/SmartComKjActionRecordController.java`
  - `@RequestMapping` 改为 `{"/smartComKjActionRecord", "/abt/abtComKjActionRecord"}`
- `springboot-smart/src/main/java/com/nh/smart/controller/material/SmartComKjLibwController.java`
  - `@RequestMapping` 改为 `{"/smartComKjLibw", "/abt/abtComKjLibw"}`
- `springboot-smart/src/main/java/com/nh/smart/controller/security/base/AuthController.java`
  - `@RequestMapping` 改为 `{"/auth", "/saas/auth"}`

2. 前端“同事”语义改为“朋友”，并保留历史接口命名。
- `articleProject/src/views/abt/customerOperation/clientsort/index.vue`
- `articleProject/src/views/abt/customerOperation/looked/looked.vue`
- `articleProject/src/api/abt/customerOperation/clientsort/index.js`

3. 前端本地开发地址补齐。
- `articleProject/src/config/index.js`
  - 新增 `baseUrl.dev = 'http://127.0.0.1:8080'`

4. 新增 V2 兼容接口控制器（先保证页面联通与结构稳定）。
- `springboot-smart/src/main/java/com/nh/smart/controller/compat/V2CompatActionController.java`
- `springboot-smart/src/main/java/com/nh/smart/controller/compat/V2CompatSelectController.java`
- `springboot-smart/src/main/java/com/nh/smart/controller/compat/V2CompatCustomBasemsgController.java`

## 已补齐的关键接口（兼容层）

- `/abt/abtComKjActionRecord/getCommunicationKH`
- `/abt/abtComKjActionRecord/getRecentlyKH`
- `/abt/abtComKjActionRecord/getStandardKH`
- `/abt/abtComKjActionRecord/getColleague`
- `/abt/abtComKjActionRecord/getKHContacts`
- `/abt/abtComKjActionRecord/getFollowList`
- `/abt/abtComKjActionRecord/insertFollow`
- `/abt/abtComKjActionRecord/deleteFollow`
- `/abt/abtComKjActionRecord/getInteractiveList`
- `/abt/abtComKjActionRecord/getAIAnalysis`
- `/abt/abtComKjActionRecord/selectTimeKHByEmpno`
- `/abt/abtComKjActionRecord/selectKHByOtype`
- `/abt/abtComKjActionRecord/getRecordAnalyze`
- `/abt/abtComKjActionRecord/getRecordKH`
- `/abt/abtComKjActionRecord/getRecordRD`
- `/abt/abtComKjActionRecord/getYSLD`
- `/abt/abtComKjActionRecord/selectMessage`（已接 `smart_com_kj_chat`）
- `/abt/abtComKjActionRecord/getKjChat`
- `/abt/abtComKjActionRecord/getKjChatNum`
- `/saas/select/selectKHBQ`
- `/saas/select/selectMJ`
- `/abt/abtComKjCustomBasemsg/insertCustomBasemsg`
- `/abt/abtComKjCustomBasemsg/insertCustomLabel`
- `/abt/abtComKjCustomBasemsg/insertKHLabel`

## 说明

- 当前兼容层目标是“先跑通页面和主流程”，部分接口先返回空结构或最小实现，避免前端报错。
- 下一阶段将把兼容层逐步替换为真实 SQL 业务查询（优先：谁看了我、客户挖掘、客户分析）。

## 环境阻塞（本机）

当前环境缺少运行时，暂时无法做本地联调验证：
- `java` 未安装
- `mvn` 未安装
- `node` 未安装
- `npm` 未安装

